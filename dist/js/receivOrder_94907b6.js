var _vParams=JSON.parse(decodeURI(getQueryString("param"))),container=$(".contarin"),orderReviseInfoCon=$("#orderReviseInfoCon"),$scope={},receivOrder=function(){this.init()};receivOrder.prototype={init:function(){this.commonParam=JSON.stringify(commonParam()),this.tokens='"token":"'+_vParams.token+'","secretNumber":"'+_vParams.secretNumber+'"',this.start()},orderHead:function(){var e=this,o="";$.ajax({type:"POST",async:!1,url:config.serviceUrl,data:{param:'{"roId":'+_vParams.roId+',"companyId":'+_vParams.companyId+","+e.tokens+',"serviceId":"B03_getReceiveOrderInfo", "commonParam":'+e.commonParam+"}"},success:function(e){if(e=e||{},e.success){if($scope.orderInfo=e.receiveOrder,"receive_err_033"==e.errorCode)return o=e.errorMsg;o+='<h2 class="m-title">基础信息</h2>	<div class="item-wrap">		<ul>			<li><span>供应商：</span>'+$scope.orderInfo.vendorCode+"-"+$scope.orderInfo.vendorAbbr+"</li>			<li><span>收货单号：</span><b>"+$scope.orderInfo.roFormNo+"</b></li>			<li><span>内部单号：</span><b>"+$scope.orderInfo.roInsideNo+"</b></li>			<li><span>收货日期：</span>"+$scope.orderInfo.roFormDate+"</li>			<li><span>收货人：</span>"+$scope.orderInfo.receiveManName+"</li>			<li><span>交易币别：</span>"+$scope.orderInfo.currencyName+"</li>			<li><span>交易税别：</span>"+$scope.orderInfo.taxName+'<label class="checkbox'+(1==$scope.orderInfo.isContainTax?" on":"")+'"><input type="checkbox" checked="checked" disabled>含税'+100*$scope.orderInfo.taxRate+"%</label></li>			<li><span>交易条件：</span>"+$scope.orderInfo.conditionName+"</li>			<li><span>付款条件：</span>"+$scope.orderInfo.payWayName+"</li>		</ul>	</div>",$(".orderInfo").html(o)}}})},orderBody:function(){var e=this,o="";$.ajax({type:"POST",url:config.serviceUrl,data:{param:'{"roId":'+_vParams.roId+',"companyId":'+_vParams.companyId+","+e.tokens+',"serviceId":"B03_findRoLineList", "commonParam":'+e.commonParam+"}"},success:function(e){if(e=e||{},e.success){$scope.roLineList=e.roLineList,L=$scope.roLineList.length,o+='<h2 class="m-title">收货产品</h2>';for(var r=0;L>r;r++)o+='<div class="item-wrap">	<ul>		<li><span>收货产品：</span>'+$scope.roLineList[r].prodName+" "+$scope.roLineList[r].prodScale+"</li>		<li><span>来源单据：</span><p>采购单："+$scope.roLineList[r].sourcePoNo+"-"+$scope.roLineList[r].sourcePoLineNo+"<br>送货单："+$scope.roLineList[r].sourceDoNo+"-"+$scope.roLineList[r].sourceDoLineNo+"</p></li>		<li><span>收货批号：</span>"+$scope.roLineList[r].batchNo+"</li>		<li><span>收货数量：</span>"+$scope.roLineList[r].receiveQty+"/"+$scope.roLineList[r].receiveValuationQty+"</li>		<li><span>验退数量：</span>"+$scope.roLineList[r].prQty+"/"+$scope.roLineList[r].prValuationQty+"</li>		<li><span>收货仓库：</span>"+$scope.roLineList[r].invName+"</li>		<li><span>备注：</span><p>"+$scope.roLineList[r].remark+'</p></li>		<li class="files"><span>附件：</span></li>	</ul></div>';$(".receivOrderOrderDetail").html(o)}else fnTip.hideLoading(),container.show().html('<p style="line-height:2rem; text-align:center">'+e.errorMsg+"</p>")}})},remark:function(){var e="";e+='<h2 class="m-title">备注</h2>	<div class="item-wrap">		<ul>			<li><span>备注信息：</span>'+$scope.orderInfo.remark+'</li>			<li class="files"><span>附件：</span></li>		</ul>	</div>',$(".remarks").html(e)},start:function(){var e=this;e.orderHead(),e.orderBody(),setTimeout(function(){fnTip.hideLoading()},0),e.remark()}};